<div class="modal-header details-header">
  <h3 class="modal-title">{{torrent.decodedName}}<button type=button ng-click="$dismiss()" class="btn btn-primary pull-right" ><span class="glyphicon glyphicon-remove"></span></button></h3>
    <div class="details-progress">
      <progressbar max="1000" ng-class="{'progress-striped active':(torrent.uploadSpeed !== 0 || torrent.downloadSpeed !== 0)}" type="{{ ((torrent.percent < 250)?'warning':((torrent.percent < 999)?'info':'success')) }}" value="torrent.percent">{{torrent.percent/10}}% </progressbar>
    </div>
</div>
<div class="modal-body details-body">
  <!-- <div><b>ETA:</b> {{torrent.eta}}</div> -->
  <div><b>Real torrent name:</b> {{torrent.name}}</div>
  <div><b>Hash:</b> {{torrent.hash}}</div>
  <div><b>Size:</b> {{torrent.getSizeStrArr()[0]}}{{torrent.getSizeStrArr()[1]}}</div>
  <div><b>Statuses:</b> <i ng-repeat="status in torrent.statusesCached">
      {{ status }}<span ng-if="!$last">,</span>
    </i></div>
  <div><b>Labels:</b>  <i ng-repeat="label in torrent.getLabels()">
      {{ label }}<span ng-if="!$last">,</span>
    </i></div>
  <div><b>Clients:</b>
    {{torrent.seedsInSwarm}} seeds<span ng-if="torrent.seedsInSwarm > 0"> ({{torrent.seedsConnected}} connected)</span>,
    {{torrent.peersInSwarm}} peers<span ng-if="torrent.peersInSwarm > 0"> ({{torrent.peersConnected}} connected)</span>,
    sharing ratio {{torrent.ratio/1000}}%
  </div>
  <div><b>Transfers:</b>
    {{torrent.formatBytes(torrent.uploaded)}} uploaded ({{torrent.getUpSpeedStrArr()[0]}}{{torrent.getUpSpeedStrArr()[1]}}),
    {{torrent.formatBytes(torrent.downloaded)}} downloaded ({{torrent.getDownSpeedStrArr()[0]}}{{torrent.getDownSpeedStrArr()[1]}})
  </div>
  <p></p>
      <form role="form" ng-submit="doFilter()" class="form-inline actions-form action-toolbar">
        <div class="form-group">
          <div class="input-group input-group-sm filter-name">
            <input class="form-control" type="text" ng-model="filters.name" placeholder="Filter by name">
            <span class="input-group-btn">
              <button class="btn" type="button" ng-disabled="filters.name === ''" ng-click="filters.name = ''" ><span class="glyphicon glyphicon-remove-circle"></span></button>
            </span>
          </div>
        </div>
    <div class="form-group">
      <div class="input-group input-group-sm action-priority">
          <select ng-model="priorityToSet" class="form-control squared" ng-disabled="hasSelection === false" ng-change="setPriority()">
            <option value="" disabled selected>Set priority</option>
            <option value="0">Skip</option>
            <option value="1">Low</option>
            <option value="2">Normal</option>
            <option value="3">High</option>
          </select>
        </div>
      </div>
      </form>
  <p></p>
  <div class="torrent">
  <div class="input-group input-group-sm torrent-header details-files-header">
    <span class="input-group-addon">
      <input type="checkbox" ng-model="selectCheckbox" ng-change="toggleSelection()" >
    </span>
    <span class="form-control name sorter text-center" ng-click="sorter.field = 'name'; sorter.descending=!sorter.descending">Name
      <span class="glyphicon" ng-show="sorter.field === 'name'" ng-class="{'glyphicon-sort-by-attributes-alt':sorter.descending,'glyphicon-sort-by-attributes':!sorter.descending}"></span>
    </span>
    <span class="input-group-addon size sorter text-center" >
      <span ng-click="sorter.field = 'percent'; sorter.descending=!sorter.descending">%
        <span class="glyphicon" ng-show="sorter.field === 'percent'" ng-class="{'glyphicon-sort-by-attributes-alt':sorter.descending,'glyphicon-sort-by-attributes':!sorter.descending}"></span>
      </span>
      -
      <span ng-click="sorter.field = 'size'; sorter.descending=!sorter.descending">Size
        <span class="glyphicon" ng-show="sorter.field === 'size'" ng-class="{'glyphicon-sort-by-attributes-alt':sorter.descending,'glyphicon-sort-by-attributes':!sorter.descending}"></span>
      </span>
    </span>
    <span class="input-group-addon priority sorter text-center" ng-click="sorter.field = 'priority'; sorter.descending=!sorter.descending">Priority
      <span class="glyphicon" ng-show="sorter.field === 'prioritÃ '" ng-class="{'glyphicon-sort-by-attributes-alt':sorter.descending,'glyphicon-sort-by-attributes':!sorter.descending}"></span>
    </span>
  </div>
</div>
<p></p>

<div class="separator"></div>
<div vs-repeat="30" vs-autoresize class="repeater-container" ng-style="{ height: listHeight + 'px'}">
  <div ng-repeat="file in ($parent.filteredFiles = (torrent.files | filter:{name:filters.name} | orderBy:sorter.field:sorter.descending))" class="torrent" data-toggle="context" >
    <div class="input-group input-group-sm torrent-row selectable" ng-class="{'selected':file.selected}" ng-click="toggleSelection(file)">
      <span class="input-group-addon">
        <input type="checkbox" ng-model="file.selected" ng-click="checkSelected();$event.stopPropagation()" >
      </span>
      <div class="form-control selectable name" >{{ file.name }}
      </div>
      <div class="input-group-addon size">
        <span class="byte-value">{{ torrent.formatBytesStrArr(file.size)[0] }}</span> <span class="byte-uom">{{ torrent.formatBytesStrArr(file.size)[1] }}</span><div class="download-progress" ng-style="{'width':file.percent+'%'}" ng-class="{'btn-warning':(file.percent < 25), 'btn-info':(file.percent < 99), 'btn-success':(file.percent > 98)}"></div>
      </div>
      <div class="input-group-addon input-group-sm priority text-center">
      <span class="animate-switch-container"
        ng-switch on="file.priority">
          <span ng-switch-when="0">Skip</span>
          <span ng-switch-when="1">Low</span>
          <span ng-switch-when="2">Normal</span>
          <span ng-switch-when="3">High</span>
          <span ng-switch-default>Unknown</span>
      </span>
      </div>
    </div>
  </div>
</div>
<!-- <div vs-repeat="30" vs-autoresize class="repeater-container" ng-style="{ height: listHeight + 'px'}">
  <div ng-repeat="item in torrent.files" class="torrent" data-toggle="context" >
    <div class="input-group input-group-sm torrent-row" ng-class="{'selected':item.selected}">
      <span class="input-group-addon">
        <input type="checkbox" ng-model="item.selected" ng-change="updateSelected()" >
      </span>
      <span class="input-group-addon status" title="{{statusTitle}}" >
        <span class="glyphicon {{statusClass}} {{statusColor}}"></span>
      </span>
      <div title="{{item.name}}" class="form-control selectable name" ng-click="setSelected(item.hash,$event)" >{{item.name}}
      </div>
      <div class="input-group-addon selectable size">
        <span class="byte-value">{{item.getSizeStrArr()[0]}}</span> <span class="byte-uom">{{item.getSizeStrArr()[1]}}</span><div class="download-progress" ng-style="{'width':item.getPercentStr()}" ng-class="{'btn-warning':(item.percent < 250), 'btn-info':(item.percent < 999), 'btn-success':(item.percent > 998)}"></div></div>
        <span class="input-group-addon selectable speed hide-on-md">
          <span class="byte-value">{{item.getUpSpeedStrArr()[0]}}</span> <span class="byte-uom">{{item.getUpSpeedStrArr()[1]}}</span>
          -
          <span class="byte-value">{{item.getDownSpeedStrArr()[0]}}</span> <span class="byte-uom">{{item.getDownSpeedStrArr()[1]}}</span>
        </span>
        <span class="input-group-addon selectable peers hide-on-md">
          <span class="byte-value">{{item.seedsInSwarm}}</span>
          -
          <span class="byte-value">{{item.peersInSwarm}}</span>
        </span>
      </div>
  </div>
</div> -->
<div class="separator"></div>
  <!-- <pre>
  <code>
    {{filteredFiles | json}}
  </code>
    {{torrent | json}}
  </pre> -->
</div>
